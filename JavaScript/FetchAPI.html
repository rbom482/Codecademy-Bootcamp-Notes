<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fetch</title>
</head>
<body>
  <h1>Posts</h1>
  <hr>
  <div id="post-list"></div>

  <script>
    /*
      # Fetch: Can be used to make API requests to get external data in our application
        - Works on promise principle
        - Syntax:
          fetch(API_URL)
            .then(response => response.json())
            .then(data => console.log(data))
            .catch(error =>  console.log(error))

      # API: Application Programming Interface
        - Medium for data exchange between the client (frontend) and the server (backend)
          - Client -> Server: Request
          - Server -> Client: Response
    */

    /* ------------------------------ */
    // let USERS = []
    // fetch('https://jsonplaceholder.typicode.com/users')
    //   .then(res => res.json())
    //   .then(data => { 
    //     USERS = data 
    //     console.log(USERS.map(u => u.name))
    //   })
    //   .catch(error =>  console.log('Error occured', error))

    /* ------------------------------ */
    fetch('https://jsonplaceholder.typicode.com/posts')
      .then(res => res.json())
      .then(data => { 
        data.forEach(post => {
          createPostView(post.id, post.title, post.body)
        });
      })
      .catch(error =>  console.log('Error occured', error))

    function createPostView(id, title, body) {
      const postList = document.getElementById('post-list')

      const titleh2 = document.createElement('h2')
      titleh2.innerText = `Post ${id}: ${title}`
      const bodyp = document.createElement('p')
      bodyp.innerText = body
      const hr = document.createElement('hr')

      postList.append(titleh2, bodyp, hr)
    }
  </script>
</body>
</html>